# How to Build the Mega

## Build with Cargo

### Build

```bash
cargo build
```

### Test all workspace

```bash
cargo test --workspace
```

### Clippy

```bash
cargo clippy --workspace --all-targets --all-features -- -D warnings
```

### Check

```bash
cargo check
```

### Doc

```bash
cargo doc
```

## Build with Bazel
This project uses Bazel to build the pipeline. Below is a simple usage guide:

1. Use cargo build to download crates and generate Cargo.lock from the repository:

```bash
cargo build
```

2. Now we can run bazel sync to pin cargo dependencies as Bazel targets:

```bash
CARGO_BAZEL_REPIN=1 bazel sync --only=crate_index
```


You should run this command **whenever you update dependencies** in Cargo files. We can also use a Bazel query to examine targets generated by crate_universe:

```bash
bazel query @crate_index//...
```

3. Finally we can build and test the mega:

```bash
bazel build //:mega
```