entity UserGroup in [UserGroup];
entity User in [UserGroup];

entity Repository = {
    "is_private": Bool,
    "admins": UserGroup,
    "maintainers": UserGroup,
};

entity MergeRequest = {
    "repo": Repository,
    "owner": User,
};

entity Issue = {
    "repo": Repository,
    "owner": User,
};

action "deleteRepo", "viewRepo", "forkRepo", "pullRepo", "pushRepo" appliesTo {
    principal: [User],
    resource: [Repository],
};

action "createMergeRequest", "editMergeRequest", "deleteMergeRequest", "approveMergeRequest" appliesTo {
    principal: [User],
    resource: [MergeRequest],
};

action "openIssue", "assignIssue", "deleteIssue", "editIssue" appliesTo {
    principal: [User],
    resource: [Issue],
};

action "addMaintainer", "addAdmin" appliesTo {
    principal: [User],
    resource: [Repository],
};